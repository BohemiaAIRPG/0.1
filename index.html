<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bohemia AIRPG</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <header class="header">
            <h1>‚öîÔ∏è BOHEMIA AIRPG <span style="font-size: 0.4em; opacity: 0.6;">[v0.8 STABLE]</span></h1>
            <p style="color: #666; font-size: 0.8em; margin-top: -10px;">Medieval AI Roleplay Experience</p>
        </header>

        <!-- –≠–∫—Ä–∞–Ω –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã -->
        <div id="startScreen" class="start-screen">
            <div class="start-content">
                <h2>–ù–∞—á–∞–ª–æ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è</h2>
                <input type="text" id="playerName" placeholder="–ò–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞" maxlength="15">
                <select id="playerGender">
                    <option value="male">–ú—É–∂—á–∏–Ω–∞</option>
                    <option value="female">–ñ–µ–Ω—â–∏–Ω–∞</option>
                </select>
                <button class="btn btn-primary" onclick="startGame()">‚öîÔ∏è –ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
            </div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π —ç–∫—Ä–∞–Ω –∏–≥—Ä—ã -->
        <div id="gameScreen" class="game-screen hidden">
            <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
            <aside class="stats-panel">
                <div class="character-info">
                    <h3 id="charName">–°—Ç—Ä–∞–Ω–Ω–∏–∫</h3>
                    <p class="char-title">???</p>
                    <p class="location" id="location">üìç –†–∞—Ç–∞–π ‚Ä¢ 12 –∏—é–Ω 1403 ‚Ä¢ —É—Ç—Ä–æ</p>
                </div>

                <div class="stats">
                    <h4>–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h4>
                    <div class="stat">
                        <span>‚ù§Ô∏è –ó–¥–æ—Ä–æ–≤—å–µ</span>
                        <div class="progress-bar">
                            <div id="healthBar" class="progress-fill health" style="width: 100%"></div>
                        </div>
                        <span id="healthText">100/100</span>
                    </div>
                    <div class="stat">
                        <span>üí™ –í—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å</span>
                        <div class="progress-bar">
                            <div id="staminaBar" class="progress-fill stamina" style="width: 100%"></div>
                        </div>
                        <span id="staminaText">100/100</span>
                    </div>
                    <div class="stat">
                        <span>üçñ –°—ã—Ç–æ—Å—Ç—å</span>
                        <div class="progress-bar">
                            <div id="satietyBar" class="progress-fill satiety" style="width: 100%"></div>
                        </div>
                        <span id="satietyText">100/100</span>
                    </div>
                    <div class="stat">
                        <span>‚ö° –ë–æ–¥—Ä–æ—Å—Ç—å</span>
                        <div class="progress-bar">
                            <div id="energyBar" class="progress-fill energy" style="width: 100%"></div>
                        </div>
                        <span id="energyText">100/100</span>
                    </div>
                    <div class="stat-row">
                        <span>üí∞ –ì—Ä–æ—à–∏:</span>
                        <strong id="coins">0</strong>
                    </div>
                    <div class="stat-row">
                        <span>üõ°Ô∏è –†–µ–ø—É—Ç–∞—Ü–∏—è:</span>
                        <strong id="reputation">50/100</strong>
                    </div>
                </div>

                <div class="equipment">
                    <h4>–≠–∫–∏–ø–∏—Ä–æ–≤–∫–∞</h4>
                    <div class="equip-item">
                        <span>‚öîÔ∏è</span>
                        <div>
                            <p id="weaponName">–∂–µ–ª–µ–∑–Ω—ã–π –º–µ—á</p>
                            <div class="condition-bar">
                                <div id="weaponCondition" class="condition-fill" style="width: 100%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="equip-item">
                        <span>üõ°Ô∏è</span>
                        <div>
                            <p id="armorName">–∫–æ–∂–∞–Ω—ã–π –¥–æ—Å–ø–µ—Ö</p>
                            <div class="condition-bar">
                                <div id="armorCondition" class="condition-fill" style="width: 100%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å: –û–ø–∏—Å–∞–Ω–∏–µ –∏ –≤—ã–±–æ—Ä—ã -->
            <main class="game-main">
                <div class="scene-description" id="sceneDescription">
                    <p>–ó–∞–≥—Ä—É–∑–∫–∞...</p>
                </div>

                <div class="choices-container">
                    <h4>üéÆ –í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:</h4>
                    <div id="choicesList"></div>
                    <div class="custom-choice">
                        <input type="text" id="customChoice" placeholder="üí° –ò–ª–∏ –≤–≤–µ–¥–∏—Ç–µ —Å–≤–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–µ–π—Å—Ç–≤–∏—è...">
                        <button id="customChoiceBtn" class="btn btn-secondary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                    </div>
                </div>

                <div id="loadingIndicator" class="loading hidden">
                    <div class="spinner"></div>
                    <p>üß† AI —Å–æ–∑–¥–∞—ë—Ç –≤–∞—à—É –∏—Å—Ç–æ—Ä–∏—é...</p>
                </div>
            </main>

            <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å: –ò—Å—Ç–æ—Ä–∏—è –∏ –∫–Ω–æ–ø–∫–∏ -->
            <aside class="quest-panel">

                <div class="panel-section">
                    <button class="history-btn" id="historyBtn">
                        <span>üìñ –ò—Å—Ç–æ—Ä–∏—è</span>
                    </button>
                    <button class="history-btn" id="mapBtn"
                        style="margin-top: 10px; background: rgba(74, 144, 226, 0.1); border-color: rgba(74, 144, 226, 0.3); color: #4a90e2;">
                        <span>üó∫Ô∏è –ö–∞—Ä—Ç–∞ –ú–∏—Ä–∞</span>
                    </button>
                </div>

                <div class="panel-section">
                    <div class="save-buttons">
                        <button class="save-btn" id="saveBtn">
                            <span>üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</span>
                        </button>
                        <button class="load-btn" id="loadBtn">
                            <span>üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å</span>
                        </button>
                    </div>
                </div>

                <div class="panel-section">
                    <div class="action-buttons-grid">
                        <button class="action-btn-large" id="characterBtn">üë§ –ü–µ—Ä—Å–æ–Ω–∞–∂</button>
                        <button class="action-btn-large" id="skillsBtn">üéì –ù–∞–≤—ã–∫–∏</button>
                        <button class="action-btn-large" id="inventoryBtn">üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</button>
                    </div>
                </div>
            </aside>
            <!-- Mobile Bottom Navigation -->
            <nav class="mobile-nav">
                <button class="nav-btn" id="mobileMenuBtn">üçî –ú–µ–Ω—é</button>
                <button class="nav-btn" id="mobileInvBtn">üéí –ò–Ω–≤–µ–Ω—Ç</button>
                <button class="nav-btn" id="mobileCharBtn">üë§ –ì–µ—Ä–æ–π</button>
                <button class="nav-btn" id="mobileMapBtn">üó∫Ô∏è –ö–∞—Ä—Ç–∞</button>
            </nav>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏—Å—Ç–æ—Ä–∏–∏ -->
        <div id="historyModal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>üìñ –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–π</h3>
                    <button class="modal-close" id="closeHistoryModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="historyList" class="history-list">
                        <p class="empty-text">–ù–∞—á–∞–ª–æ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–≥—Ä—É–∑–∫–∏ -->
        <div id="loadModal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ</h3>
                    <button class="modal-close" id="closeLoadModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="savesList" class="saves-list">
                        <p class="empty-text">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∫–∞—Ä—Ç—ã -->
        <div id="mapModal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>üó∫Ô∏è –†–∞—Ç–∞–µ –∏ –æ–∫—Ä–µ—Å—Ç–Ω–æ—Å—Ç–∏</h3>
                    <button class="modal-close" id="closeMapModal">&times;</button>
                </div>
                <div class="modal-body map-modal-body">
                    <div class="map-canvas-wrap">
                        <canvas id="worldMapCanvas" class="world-map-canvas"></canvas>
                        <div id="mapCoordinates" class="map-coordinates">0, 0</div>
                    </div>
                    <div id="mapDetailsPanel" class="map-details-panel hidden">
                        <div class="map-details-header">
                            <div>
                                <div class="map-details-title" id="mapDetailsTitle">–í—ã–±–µ—Ä–∏—Ç–µ –ª–æ–∫–∞—Ü–∏—é</div>
                                <div class="map-details-subtitle" id="mapDetailsSubtitle">–ö–ª–∏–∫–Ω–∏—Ç–µ –ø–æ –º–µ—Ç–∫–µ –Ω–∞ –∫–∞—Ä—Ç–µ
                                </div>
                            </div>
                            <button class="map-details-close" id="closeMapDetailsBtn">&times;</button>
                        </div>
                        <div class="map-details-body" id="mapDetailsBody">
                            <div class="map-details-empty">–ù–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–π –ª–æ–∫–∞—Ü–∏–∏</div>
                        </div>
                        <div class="map-details-footer">
                            <button class="map-details-btn" id="mapSetWaypointBtn" disabled>üìå –ü–æ—Å—Ç–∞–≤–∏—Ç—å –º–µ—Ç–∫—É</button>
                            <button class="map-details-btn secondary" id="mapGoToNpcBtn" disabled>üë§ –ü–æ–∫–∞–∑–∞—Ç—å
                                NPC</button>
                        </div>
                    </div>
                </div>
                <div class="modal-footer modal-footer-caption">
                    –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–ª–µ—Å–∏–∫–æ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∞, –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è.
                </div>
            </div>
        </div>

        <!-- Character Modal -->
        <div id="characterModal" class="modal hidden">
            <div class="modal-content large-modal">
                <div class="modal-header">
                    <h3>üë§ –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –ü–µ—Ä—Å–æ–Ω–∞–∂–∞</h3>
                    <button class="modal-close" id="closeCharacterModal">&times;</button>
                </div>
                <div class="modal-body" id="characterInfo">
                    <!-- Character Details injected by JS -->
                </div>
            </div>
        </div>

        <!-- Skills Modal -->
        <div id="skillsModal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>üéì –ù–∞–≤—ã–∫–∏ –∏ –£–º–µ–Ω–∏—è</h3>
                    <button class="modal-close" id="closeSkillsModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="skillsList"></div>
                </div>
            </div>
        </div>

        <!-- Inventory Modal (Large) -->
        <div id="inventoryModal" class="modal hidden">
            <div class="modal-content extra-large-modal">
                <div class="modal-header">
                    <h3>üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h3>
                    <button class="modal-close" id="closeInventoryModal">&times;</button>
                </div>
                <div class="modal-body inventory-layout">
                    <!-- Filter Tabs -->
                    <div class="inventory-filters">
                        <button class="filter-btn active" data-filter="all">–í—Å—ë</button>
                        <button class="filter-btn" data-filter="weapon">–û—Ä—É–∂–∏–µ</button>
                        <button class="filter-btn" data-filter="armor">–û–¥–µ–∂–¥–∞</button>
                        <button class="filter-btn" data-filter="food">–ï–¥–∞</button>
                        <button class="filter-btn" data-filter="misc">–†–∞–∑–Ω–æ–µ</button>
                    </div>

                    <div class="inventory-container-flex">
                        <!-- Grid -->
                        <div class="inventory-grid" id="inventoryGrid">
                            <!-- Slots will be generated by JS -->
                        </div>

                        <!-- Item Details Panel -->
                        <div class="item-details-panel hidden" id="itemDetailsPanel">
                            <div class="header">
                                <div class="logo">BOHEMIA AI RPG <span style="font-size:0.5em; color:#555;">v0.7
                                        (DIAGNOSTIC)</span></div>
                                <div class="model-info"></div>
                                <div class="item-header">
                                    <div class="item-icon-large" id="detailIcon">üì¶</div>
                                    <div class="item-info">
                                        <h4 id="detailName">–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞</h4>
                                        <span class="item-type" id="detailType">–¢–∏–ø –ø—Ä–µ–¥–º–µ—Ç–∞</span>
                                    </div>
                                </div>
                                <p class="item-desc" id="detailDesc">–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞...</p>
                                <div class="item-actions">
                                    <button class="action-btn use-btn" id="useItemBtn">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å</button>
                                    <button class="action-btn drop-btn" id="dropItemBtn">–í—ã–±—Ä–æ—Å–∏—Ç—å</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –°–∫—Ä—ã—Ç—ã–π input –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞ -->
            <input type="file" id="fileInput" accept=".json" style="display: none;">
        </div>

        <script src="client.js"></script>
</body>

</html>